<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Vitalog</title>

  <!-- Paleta y tipografía -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Tus 3 CSS (ajusta nombres si difieren) -->
  <link rel="stylesheet" href="/assets/css/tokens.css">
  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/css/components.css">

  <!-- Manifest / (si ya lo tienes) -->
  <link rel="manifest" href="/assets/manifest.json">
  <meta name="theme-color" content="#ccecee" />
</head>
<body style="background:#ccecee">

  <!-- App Shell -->
  <header class="app-header">
    <div class="brand">
      <!-- logo “texto” + “imagen” (puedes cambiar orden si lo prefieres) -->
      <img src="/assets/brand/logoini.svg" alt="Vitalog" class="logo-text" />
      <img src="/assets/brand/logofin.svg" alt="" class="logo-mark" />
    </div>

    <nav class="actions">
      <!-- usuario + avatar -->
      <button class="userchip" data-action="open-profile" aria-label="Abrir perfil">
        <img src="/assets/avatars/avatarh.svg" alt="" class="avatar" />
        <span class="userchip__label" id="topbarUser">julianluzanilla@hotmail.com</span>
      </button>

      <!-- menú hamburguesa (acciones del usuario) -->
      <button class="icon-btn" data-action="toggle-menu" aria-label="Abrir menú">
        <img src="/assets/icons/ui/menu.svg" alt="" />
      </button>

      <div class="dropdown" id="userMenu" hidden>
        <button class="dd-item" data-action="open-profile">
          <img src="/assets/icons/ui/usuario.svg" alt="" /> Actualizar datos personales
        </button>
        <button class="dd-item" data-action="change-password">
          <img src="/assets/icons/ui/password.svg" alt="" /> Cambiar contraseña
        </button>
        <button class="dd-item" data-action="export-data">
          <img src="/assets/icons/ui/exportar.svg" alt="" /> Exportar datos (csv > email)
        </button>
        <button class="dd-item" data-action="backup-device">
          <img src="/assets/icons/ui/respaldo.svg" alt="" /> Respaldar en este dispositivo
        </button>
        <hr />
        <button class="dd-item dd-danger" data-action="logout">
          <img src="/assets/icons/ui/logout.svg" alt="" /> Cerrar sesión
        </button>
      </div>
    </nav>
  </header>

  <main id="views">

    <!-- VIEW: Welcome -->
    <section class="view is-center" data-view="welcome">
      <div class="stack gap-24">
        <button class="btn btn-lg btn-primary" data-action="go-login">
          Iniciar sesión
        </button>
        <button class="btn btn-lg btn-secondary" data-action="go-register">
          Solicitar registro
        </button>
      </div>
    </section>

    <!-- VIEW: Login -->
    <section class="view" data-view="login" hidden>
      <div class="auth-card">
        <h1 class="h2">Iniciar sesión</h1>

        <label class="field">
          <span>Correo electrónico</span>
          <input type="email" id="liEmail" autocomplete="email" />
        </label>

        <label class="field">
          <span>Contraseña</span>
          <input type="password" id="liPass" autocomplete="current-password" />
        </label>

        <div class="row mt-16">
          <button class="btn btn-primary" data-action="login">Iniciar sesión</button>
          <button class="btn" data-action="back-home">Volver</button>
        </div>
      </div>
    </section>

    <!-- VIEW: App (lista + acciones) -->
    <section class="view" data-view="app" hidden>
      <div class="toolbar">
        <div class="filters">
          <button class="chip" data-action="filter-all">
            <img src="/assets/icons/ui/filtro.svg" aria-hidden="true" /> Todos
          </button>
          <!-- puedes agregar más chips de tipo -->
        </div>
        <div class="spacer"></div>
        <button class="btn btn-primary" data-action="open-new">
          <img src="/assets/icons/ui/nuevo.svg" alt="" /> Nuevo
        </button>
        <button class="btn" data-action="open-edit">
          <img src="/assets/icons/ui/editar.svg" alt="" /> Editar
        </button>
        <button class="btn btn-danger" data-action="open-delete">
          <img src="/assets/icons/ui/borrar.svg" alt="" /> Borrar
        </button>
      </div>

      <div class="table-wrap">
        <table class="data-table">
          <thead>
            <tr>
              <th>Hora</th>
              <th>Tipo</th>
              <th>Valores y comentarios</th>
              <th class="t-center">Sel.</th>
            </tr>
          </thead>
          <tbody id="logTableBody">
            <!-- filas generadas por JS (sin alternar filas, como acordamos) -->
          </tbody>
        </table>
      </div>
    </section>

  </main>

  <!-- MODAL: Nuevo registro -->
  <dialog id="dlgNew" class="modal">
    <form method="dialog" class="modal__card" id="formNew">
      <header class="modal__hd">
        <h2 class="h3">Nuevo registro</h2>
      </header>
      <section class="modal__bd grid gap-12">
        <label class="field">
          <span>Fecha</span>
          <input type="date" id="newDate" />
        </label>
        <label class="field">
          <span>Hora</span>
          <input type="time" id="newTime" />
        </label>

        <label class="field">
          <span>Tipo</span>
          <select id="newType">
            <option value="dolor">Dolor</option>
            <option value="mareo">Mareo</option>
            <option value="lpm">LPM</option>
            <option value="sangre">Presión arterial</option>
            <option value="medicamento">Toma de medicamento</option>
            <option value="baño">Baño</option>
            <option value="peso">Peso</option>
          </select>
        </label>

        <label class="field">
          <span>Detalle / valores</span>
          <textarea id="newNotes" rows="3" placeholder="p. ej. 135/86 LPM 75 · En casa, después de..."></textarea>
        </label>
      </section>
      <footer class="modal__ft">
        <button class="btn" value="cancel">Cancelar</button>
        <button class="btn btn-primary" value="confirm" data-action="save-new">Guardar</button>
      </footer>
    </form>
  </dialog>

  <!-- MODAL: Perfil -->
  <dialog id="dlgProfile" class="modal">
    <form method="dialog" class="modal__card" id="formProfile">
      <header class="modal__hd">
        <h2 class="h3">Actualizar datos personales</h2>
      </header>
      <section class="modal__bd grid gap-12">
        <label class="field">
          <span>Nombre</span>
          <input type="text" id="pfName">
        </label>
        <label class="field">
          <span>Apellidos</span>
          <input type="text" id="pfLast">
        </label>

        <div class="grid grid-2 gap-12">
          <label class="field">
            <span>Fecha de nacimiento</span>
            <input type="date" id="pfBirth">
          </label>
          <label class="field">
            <span>Edad</span>
            <input type="number" id="pfAge" min="0" step="1">
          </label>
        </div>

        <div class="grid grid-2 gap-12">
          <label class="field">
            <span>Peso (kg)</span>
            <input type="number" id="pfWeight" min="0" step="0.1">
          </label>
          <label class="field">
            <span>Estatura (m)</span>
            <input type="number" id="pfHeight" min="0" step="0.01">
          </label>
        </div>

        <fieldset class="segmented">
          <legend>Nivel de actividad física</legend>
          <label><input type="radio" name="pfAct" value="sedentario" checked> Sedentario</label>
          <label><input type="radio" name="pfAct" value="leve"> Leve</label>
          <label><input type="radio" name="pfAct" value="moderado"> Moderado</label>
          <label><input type="radio" name="pfAct" value="en_forma"> En forma</label>
          <label><input type="radio" name="pfAct" value="atleta"> Atleta</label>
        </fieldset>
      </section>
      <footer class="modal__ft">
        <button class="btn" value="cancel">Cancelar</button>
        <button class="btn btn-primary" value="confirm" data-action="save-profile">Guardar</button>
      </footer>
    </form>
  </dialog>

  <!-- JS UI (puedes dividir luego en módulos) -->
  <script src="/assets/app.js" defer></script>
</body>
</html>
